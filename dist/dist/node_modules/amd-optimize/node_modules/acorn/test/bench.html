<!doctype html><head><meta charset="utf-8"><title>Acorn benchmark</title><script src="../acorn.js?v=201605041151010?v=201605041151010"></script><script src="compare/esprima.js?v=201605041151010?v=201605041151010"></script><script src="compare/traceur.js?v=201605041151010?v=201605041151010"></script><script src="jquery-string.js?v=201605041151010?v=201605041151010"></script><script src="codemirror-string.js?v=201605041151010?v=201605041151010"></script><style>td { text-align: right; padding-right: 20px; }
    th { text-align: left; padding-right: 40px; }
    body { max-width: 50em; padding: 1em 2em; }
    h1 { font-size: 150%; }</style></head><h1>Acorn/Esprima/Traceur speed comparison</h1><p>This will run each of the three ES6 parsers on the source code of jQuery 1.6.4 and CodeMirror 3.0b1 for five seconds, and show a table indicating the number of lines parsed per second. Note that Traceur always stores location data, and is thus not fairly compared by the benchmark <em>without</em> location data.</p><p></p><p>Also note that having the developer tools open in Chrome, or Firebug in Firefox <em>heavily</em> influences the numbers you get. In Chrome, the effect even lingers (in the tab) after you close the developer tools. Load in a fresh tab to get (halfway) stable numbers.</p><button onclick="run(!1)">Compare <strong>without</strong> location data</button> <button onclick="run(!0)">Compare <strong>with</strong> location data</button> <button onclick="run(!1,!0)">Run only Acorn</button> <span id="running"></span><script>function runAcorn(r,e){acorn.parse(r,{ecmaVersion:6,locations:e,sourceFile:sourceFileName})}function runEsprima(r,e){esprima.parse(r,{loc:e,source:sourceFileName})}function runTraceur(r){var e=new traceur.syntax.SourceFile(sourceFileName,r),n=new traceur.syntax.Parser(e);n.parseScript()}function benchmark(r,e){r(jquery164,e),r(codemirror30,e);for(var n,o=nowHost.now(),t=0;r(jquery164,e),r(codemirror30,e),t+=totalLines,n=nowHost.now(),!(n-o>5e3););return t/((n-o)/1e3)}function showOutput(r){for(var e="<hr><table>",n=0;n<r.length;++n)e+="<tr><th>"+r[n].name+"</td><td>"+Math.round(r[n].score)+" lines per second</td><td>"+Math.round(100*r[n].score/r[0].score)+"%</td></tr>";document.body.appendChild(document.createElement("div")).innerHTML=e}function run(r,e){function n(){t[u].score=benchmark(t[u].runner,r),++u==t.length?(o.innerHTML="",showOutput(t)):setTimeout(n,100)}var o=document.getElementById("running");o.innerHTML="Running benchmark...";var t=[{name:"Acorn",runner:runAcorn},{name:"Esprima",runner:runEsprima},{name:"Traceur",runner:runTraceur}];e&&(t.length=1);var u=0;setTimeout(n,50)}var sourceFileName="source.js?v=201605041151010?v=201605041151010",totalLines=codemirror30.split("\n").length+jquery164.split("\n").length,nowHost="object"==typeof performance&&"now"in performance?performance:Date</script>